{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/Heptabase-Blog/src/page/Post.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\nimport Container from '../components/Container';\nimport Nav from '../components/Nav';\nimport '../index.css';\nimport 'github-markdown-css';\n\n// 文章页面\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Post(props) {\n  _s2();\n  var _s = $RefreshSig$();\n  let {\n    slug\n  } = useParams();\n  const useScrollToTop = () => {\n    _s();\n    //注意自定义Hooks要用useXXX定义\n    const {\n      pathname\n    } = useLocation();\n    useEffect(() => {\n      console.log('useScrollToTop');\n      console.log(window.history);\n      console.log(window.history.pushState);\n      let url_histroy = sessionStorage.getItem('histroy');\n      let thisPageKey = window.history.state.key;\n      console.log(url_histroy);\n      if (url_histroy != null) {\n        url_histroy = url_histroy.split(',');\n        if (url_histroy.indexOf(thisPageKey)) {\n          // 回到旧页面\n          window.scrollTo(0, 0);\n        } else {\n          url_histroy = url_histroy + ',' + thisPageKey;\n          sessionStorage.setItem('histroy', url_histroy);\n        }\n      } else {\n        sessionStorage.setItem('histroy', thisPageKey);\n      }\n      console.log(url_histroy);\n\n      // console.log(pathname);\n\n      // console.log(sessionStorage.getItem('pathname'));\n\n      // sessionStorage.setItem('pathname', pathname)\n    }, [pathname]);\n  };\n  _s(useScrollToTop, \"+8VPq4+XDMjo/kjL3WLkbwU2Amg=\", false, function () {\n    return [useLocation];\n  });\n  useScrollToTop();\n  // useReStoreScrollTop();\n\n  useEffect(() => {\n    // console.log('scrollTo(0, 0)');\n    // window.scrollTo(0, 0);\n    console.log('Post useEffect');\n  });\n  document.title = props.title;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        post_id: slug\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 12\n  }, this);\n}\n_s2(Post, \"HBQhplv72bdxUEIBjnhAF29acK0=\", false, function () {\n  return [useParams, useScrollToTop];\n});\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Routes","Route","Link","useParams","useLocation","Container","Nav","Post","props","slug","useScrollToTop","pathname","console","log","window","history","pushState","url_histroy","sessionStorage","getItem","thisPageKey","state","key","split","indexOf","scrollTo","setItem","document","title"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/src/page/Post.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nimport Container from '../components/Container'\nimport Nav from '../components/Nav';\nimport '../index.css'\n\nimport 'github-markdown-css'\n\n// 文章页面\nfunction Post(props) {\n    let { slug } = useParams();\n\n\n    const useScrollToTop = () => {   //注意自定义Hooks要用useXXX定义\n        const { pathname } = useLocation();\n        useEffect(() => {\n\n            console.log('useScrollToTop');\n\n            console.log(window.history);\n            console.log(window.history.pushState);\n\n            let url_histroy = sessionStorage.getItem('histroy')\n            let thisPageKey = window.history.state.key\n            console.log(url_histroy);\n\n            if (url_histroy != null) {\n                url_histroy = url_histroy.split(',')\n                if (url_histroy.indexOf(thisPageKey)) {\n                    // 回到旧页面\n                    window.scrollTo(0, 0);\n                } else {\n                    url_histroy = url_histroy+','+thisPageKey\n                    sessionStorage.setItem('histroy', url_histroy)\n                }\n            } else {\n                sessionStorage.setItem('histroy', thisPageKey)\n            }\n\n\n            console.log(url_histroy);\n\n            // console.log(pathname);\n\n            // console.log(sessionStorage.getItem('pathname'));\n\n\n\n            // sessionStorage.setItem('pathname', pathname)\n\n\n\n        }, [pathname]);\n    }\n\n    useScrollToTop();\n    // useReStoreScrollTop();\n\n    useEffect(() => {\n        // console.log('scrollTo(0, 0)');\n        // window.scrollTo(0, 0);\n        console.log('Post useEffect');\n\n    })\n\n    document.title = props.title\n\n    return <div>\n\n        <div>\n            <Nav />\n            <Container post_id={slug} />\n        </div>\n    </div>;\n\n}\n\nexport default Post;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,SAAS,QAAQ,kBAAkB;AAC1F,SAASC,WAAW,QAAQ,cAAc;AAE1C,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAO,cAAc;AAErB,OAAO,qBAAqB;;AAE5B;AAAA;AACA,SAASC,IAAI,CAACC,KAAK,EAAE;EAAA;EAAA;EACjB,IAAI;IAAEC;EAAK,CAAC,GAAGN,SAAS,EAAE;EAG1B,MAAMO,cAAc,GAAG,MAAM;IAAA;IAAI;IAC7B,MAAM;MAAEC;IAAS,CAAC,GAAGP,WAAW,EAAE;IAClCR,SAAS,CAAC,MAAM;MAEZgB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAE7BD,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,OAAO,CAAC;MAC3BH,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC;MAErC,IAAIC,WAAW,GAAGC,cAAc,CAACC,OAAO,CAAC,SAAS,CAAC;MACnD,IAAIC,WAAW,GAAGN,MAAM,CAACC,OAAO,CAACM,KAAK,CAACC,GAAG;MAC1CV,OAAO,CAACC,GAAG,CAACI,WAAW,CAAC;MAExB,IAAIA,WAAW,IAAI,IAAI,EAAE;QACrBA,WAAW,GAAGA,WAAW,CAACM,KAAK,CAAC,GAAG,CAAC;QACpC,IAAIN,WAAW,CAACO,OAAO,CAACJ,WAAW,CAAC,EAAE;UAClC;UACAN,MAAM,CAACW,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;QACzB,CAAC,MAAM;UACHR,WAAW,GAAGA,WAAW,GAAC,GAAG,GAACG,WAAW;UACzCF,cAAc,CAACQ,OAAO,CAAC,SAAS,EAAET,WAAW,CAAC;QAClD;MACJ,CAAC,MAAM;QACHC,cAAc,CAACQ,OAAO,CAAC,SAAS,EAAEN,WAAW,CAAC;MAClD;MAGAR,OAAO,CAACC,GAAG,CAACI,WAAW,CAAC;;MAExB;;MAEA;;MAIA;IAIJ,CAAC,EAAE,CAACN,QAAQ,CAAC,CAAC;EAClB,CAAC;EAAA,GAxCKD,cAAc;IAAA,QACKN,WAAW;EAAA;EAyCpCM,cAAc,EAAE;EAChB;;EAEAd,SAAS,CAAC,MAAM;IACZ;IACA;IACAgB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EAEjC,CAAC,CAAC;EAEFc,QAAQ,CAACC,KAAK,GAAGpB,KAAK,CAACoB,KAAK;EAE5B,oBAAO;IAAA,uBAEH;MAAA,wBACI,QAAC,GAAG;QAAA;QAAA;QAAA;MAAA,QAAG,eACP,QAAC,SAAS;QAAC,OAAO,EAAEnB;MAAK;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA;EAC1B;IAAA;IAAA;IAAA;EAAA,QACJ;AAEV;AAAC,IAlEQF,IAAI;EAAA,QACMJ,SAAS,EA6CxBO,cAAc;AAAA;AAAA,KA9CTH,IAAI;AAoEb,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}