{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/Heptabase-Blog/src/page/Post.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams, useNavigate } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\nimport Container from '../components/Container';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport '../index.css';\nimport 'github-markdown-css';\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction';\nimport { id } from 'date-fns/locale';\nimport useHash from \"../hooks/useHash\";\n\n// 文章页面\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n    this.findContent = (id, heptabase_blog_data) => {\n      if (heptabase_blog_data === '') {\n        return;\n      }\n      let new_card = null;\n      console.log('Post findContent for:');\n      for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n        if (heptabase_blog_data.cards[i]['id'] == id) {\n          // 处理内容中的图片\n          heptabase_blog_data.cards[i] = getClearImag(heptabase_blog_data.cards[i]);\n          console.log('getClearImag done');\n          // 处理内容中的链接\n          new_card = getClearCard(heptabase_blog_data.cards[i], heptabase_blog_data.cards);\n          heptabase_blog_data.cards[i] = new_card['card'];\n\n          // 设置网页标题\n          if (new_card['card']['title'] !== 'About') {\n            document.title = new_card['card']['title'];\n          } else {\n            document.title = 'Jiang 的数字花园🌱';\n          }\n          let cardList = [];\n          return new_card;\n        }\n      }\n      return new_card;\n    };\n    this.handleLinkClick = (link_id, current_id) => {\n      // window.location.search = window.location.search+'&note-id='+id\n      // setHash(hash + 'note-id='+id)\n\n      // 已经显示此卡片则不更新 URL 和数据\n      let bingo = false;\n      this.state.cardList.forEach(item => {\n        if (link_id == item['card']['id']) {\n          bingo = true;\n          // 定位到此卡片上\n          let note_list = document.getElementsByClassName('container');\n          for (let j = 0; j < note_list.length; j++) {\n            let note = note_list[j];\n            if (note.getAttribute('note_id') === link_id) {\n              document.getElementsByClassName('notes')[0].scrollTo({\n                left: note.offsetLeft,\n                behavior: 'smooth'\n              });\n              return;\n            }\n          }\n        }\n      });\n      if (bingo) {\n        return;\n      }\n\n      // 删除 Link 所在 card 后的所有 URL 参数\n      let url_search = window.location.search;\n      url_search = url_search.replace('?', '');\n      url_search = url_search.replace(/&/gi, '');\n      let url_search_list = url_search.split('note-id=');\n      let new_url_search = '';\n      let current_page_index = -1;\n      for (let i = 0; i < url_search_list.length; i++) {\n        if (url_search_list[i] === '') {\n          continue;\n        }\n        if (url_search_list[i] === current_id) {\n          // URL 参数 === current_id\n          current_page_index = i;\n        } else {\n          // URL 参数 !== current_id\n        }\n        if (new_url_search == '') {\n          new_url_search += '?note-id=' + url_search_list[i];\n        } else {\n          new_url_search += '&note-id=' + url_search_list[i];\n        }\n\n        //如果当前 id === current_id，则忽略后面的所有 ID\n        if (current_page_index > -1) {\n          break;\n        }\n      }\n      if (new_url_search == '') {\n        new_url_search += '?note-id=' + link_id;\n      } else {\n        new_url_search += '&note-id=' + link_id;\n      }\n\n      // 设置 URL\n      window.history.pushState({}, '', window.location.origin + '/post' + new_url_search);\n      // 记录 URL\n      this.setState({\n        location: window.location.href\n      });\n\n      // 删除 URL 中不存在的 Card\n      this.resetCardList();\n      // 根据 URL 获取 card 数据\n      this.herfToData();\n    };\n    this.herfToData = () => {\n      // 从 URL 中获取 note id，根据 id 获取卡片数据\n      let card_list = [];\n      let url_search = window.location.search;\n      url_search = url_search.replace('?', '');\n      url_search = url_search.replace(/&/gi, '');\n      let url_search_list = url_search.split('note-id=');\n      for (let i = 0; i < url_search_list.length; i++) {\n        if (url_search_list[i] == '') {\n          continue;\n        }\n        // 将数据保存到 card list 中\n        card_list.push(this.findContent(url_search_list[i], this.state.card));\n      }\n\n      // 收集 card 数据后一次性 setState（在 for 内分多次 setState 的话容易丢失数据）\n      this.setState({\n        cardList: card_list\n      });\n    };\n    this.handleHashChange = url => {\n      console.log(url);\n      // 如果 url 发生变化，则更新数据\n      if (url !== this.state.location) {\n        // 将当前 URL 保存到 state 中\n        this.setState({\n          location: url\n        });\n        if (this.state.location !== '') {\n          // cardList 中不存在 URL 的某一个 card\n          // 加载此 card 的数据\n          this.herfToData();\n        }\n      }\n\n      // 删除 URL 中不存在的 Card\n      this.resetCardList();\n    };\n    this.resetCardList = () => {\n      let url = window.location.href;\n      //比对 url 和 cardList\n      for (let i = 0; i < this.state.cardList.length; i++) {\n        // url 中不存在此 card\n        if (url.indexOf(this.state.cardList[i]['card']['id']) < 0) {\n          // 删除 card\n          this.state.cardList.splice(i, 1);\n          this.setState({\n            cardList: this.state.cardList\n          });\n        } else {\n          // url 中存在此 card\n          // continue\n        }\n      }\n    };\n    this.state = {\n      card: null //所有的 hepta 数据\n      ,\n      cardList: [] // 当前页面的卡片列表\n      ,\n      location: '' // 记录 URL\n    };\n  }\n\n  componentDidMount() {\n    // 请求 hepta 数据 getHeptabaseData\n    getHeptabaseData.then(res => {\n      let heptabase_blog_data = res.data;\n\n      // 将数据保存到 state 中\n      this.setState({\n        card: heptabase_blog_data\n      }, () => {\n        // 渲染 URL、数据\n        this.herfToData();\n      });\n    });\n  }\n\n  // 根据 card id 获取 card content\n\n  render() {\n    if (this.state.card === null) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"loading\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 21\n      }, this);\n    } else {\n      let card_list_dom = [];\n      for (let i = 0; i < this.state.cardList.length; i++) {\n        let card = this.state.cardList[i];\n\n        //设置笔记样式\n        // left = index*40px; right = index*-40-400\n        let note_style = {\n          left: i * 40 + 'px'\n        };\n        let note = /*#__PURE__*/_jsxDEV(Container, {\n          style: note_style,\n          handleHashChange: this.handleHashChange,\n          handleLinkClick: this.handleLinkClick,\n          card: card\n        }, card['card']['id'], false, {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 28\n        }, this);\n        card_list_dom.push(note);\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"notes\",\n            children: card_list_dom\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 21\n      }, this);\n    }\n  }\n}\nexport default Post;","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Routes","Route","Link","useParams","useNavigate","useLocation","Container","Nav","Footer","getHeptabaseData","getClearCard","getClearImag","id","useHash","Post","Component","constructor","props","findContent","heptabase_blog_data","new_card","console","log","i","cards","length","document","title","cardList","handleLinkClick","link_id","current_id","bingo","state","forEach","item","note_list","getElementsByClassName","j","note","getAttribute","scrollTo","left","offsetLeft","behavior","url_search","window","location","search","replace","url_search_list","split","new_url_search","current_page_index","history","pushState","origin","setState","href","resetCardList","herfToData","card_list","push","card","handleHashChange","url","indexOf","splice","componentDidMount","then","res","data","render","card_list_dom","note_style"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/src/page/Post.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams, useNavigate } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nimport Container from '../components/Container'\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer'\n\nimport '../index.css'\nimport 'github-markdown-css'\n\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction'\nimport { id } from 'date-fns/locale';\n\nimport useHash from \"../hooks/useHash\";\n\n// 文章页面\nclass Post extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            card: null //所有的 hepta 数据\n            , cardList: [] // 当前页面的卡片列表\n            , location: '' // 记录 URL\n        };\n    }\n\n    componentDidMount() {\n\n        // 请求 hepta 数据 getHeptabaseData\n        getHeptabaseData.then((res) => {\n\n            let heptabase_blog_data = res.data\n\n            // 将数据保存到 state 中\n            this.setState({\n                card: heptabase_blog_data\n            }, () => {\n                // 渲染 URL、数据\n                this.herfToData()\n            })\n\n        })\n\n    }\n\n    // 根据 card id 获取 card content\n    findContent = (id, heptabase_blog_data) => {\n        if (heptabase_blog_data === '') {\n            return\n        }\n\n        let new_card = null\n        console.log('Post findContent for:');\n        for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n\n            if (heptabase_blog_data.cards[i]['id'] == id) {\n\n                // 处理内容中的图片\n                heptabase_blog_data.cards[i] = getClearImag(heptabase_blog_data.cards[i])\n                console.log('getClearImag done');\n                // 处理内容中的链接\n                new_card = getClearCard(heptabase_blog_data.cards[i], heptabase_blog_data.cards)\n                heptabase_blog_data.cards[i] = new_card['card']\n\n                // 设置网页标题\n                if (new_card['card']['title'] !== 'About') {\n                    document.title = new_card['card']['title']\n                } else {\n                    document.title = 'Jiang 的数字花园🌱'\n                }\n\n                let cardList = []\n\n                return new_card\n\n\n            }\n        }\n\n        return new_card\n\n    }\n\n    // 文章内链接、反向链接点击\n    handleLinkClick = (link_id, current_id) => {\n        // window.location.search = window.location.search+'&note-id='+id\n        // setHash(hash + 'note-id='+id)\n\n        // 已经显示此卡片则不更新 URL 和数据\n        let bingo = false\n        this.state.cardList.forEach(item => {\n\n            if(link_id==item['card']['id']){\n                bingo = true\n                // 定位到此卡片上\n                let note_list = document.getElementsByClassName('container')\n\n                for (let j =0;j<note_list.length;j++){\n                    let note = note_list[j]\n                    if(note.getAttribute('note_id')===link_id){\n                        document.getElementsByClassName('notes')[0].scrollTo({ left: note.offsetLeft, behavior: 'smooth' })\n                        return\n                    }\n                }\n                \n            }\n            \n        });\n\n\n        if(bingo){\n            \n            return\n        }\n\n\n        // 删除 Link 所在 card 后的所有 URL 参数\n        let url_search = window.location.search\n        url_search = url_search.replace('?', '')\n        url_search = url_search.replace(/&/gi, '')\n        let url_search_list = url_search.split('note-id=')\n\n        let new_url_search = ''\n        let current_page_index = -1\n        for (let i = 0; i < url_search_list.length; i++) {\n\n            if (url_search_list[i] === '') {\n                continue\n            }\n\n            if (url_search_list[i] === current_id) {\n                // URL 参数 === current_id\n                current_page_index = i\n            } else {\n                // URL 参数 !== current_id\n            }\n\n            if (new_url_search == '') {\n                new_url_search += '?note-id=' + url_search_list[i]\n            } else {\n                new_url_search += '&note-id=' + url_search_list[i]\n            }\n\n            //如果当前 id === current_id，则忽略后面的所有 ID\n            if (current_page_index > -1) {\n                break;\n            }\n        }\n\n        if (new_url_search == '') {\n            new_url_search += '?note-id=' + link_id\n        } else {\n            new_url_search += '&note-id=' + link_id\n        }\n\n        // 设置 URL\n        window.history.pushState({}, '', window.location.origin + '/post' + new_url_search)\n        // 记录 URL\n        this.setState({\n            location: window.location.href\n        })\n\n\n        // 删除 URL 中不存在的 Card\n        this.resetCardList()\n        // 根据 URL 获取 card 数据\n        this.herfToData()\n\n\n    }\n\n    herfToData = () => {\n\n        // 从 URL 中获取 note id，根据 id 获取卡片数据\n        let card_list = []\n        let url_search = window.location.search\n        url_search = url_search.replace('?', '')\n        url_search = url_search.replace(/&/gi, '')\n        let url_search_list = url_search.split('note-id=')\n\n        for (let i = 0; i < url_search_list.length; i++) {\n            if (url_search_list[i] == '') {\n                continue\n            }\n            // 将数据保存到 card list 中\n            card_list.push(this.findContent(url_search_list[i], this.state.card))\n\n        }\n\n        // 收集 card 数据后一次性 setState（在 for 内分多次 setState 的话容易丢失数据）\n        this.setState({\n            cardList: card_list\n        })\n\n\n    }\n\n    // 当 URL 变化时（通常是浏览器的返回、前进事件触发）\n    handleHashChange = (url) => {\n        console.log(url);\n        // 如果 url 发生变化，则更新数据\n        if (url !== this.state.location) {\n\n\n            // 将当前 URL 保存到 state 中\n            this.setState({\n                location: url\n            })\n\n            if (this.state.location !== '') {\n\n                // cardList 中不存在 URL 的某一个 card\n                // 加载此 card 的数据\n                this.herfToData()\n\n            }\n\n        }\n\n        // 删除 URL 中不存在的 Card\n        this.resetCardList()\n\n    }\n\n    // 删除 URL 中不存在的 Card\n    resetCardList = () => {\n        let url = window.location.href\n        //比对 url 和 cardList\n        for (let i = 0; i < this.state.cardList.length; i++) {\n            // url 中不存在此 card\n            if (url.indexOf(this.state.cardList[i]['card']['id']) < 0) {\n\n\n                // 删除 card\n                this.state.cardList.splice(i, 1)\n                this.setState({\n                    cardList: this.state.cardList\n                })\n\n            } else {\n                // url 中存在此 card\n                // continue\n            }\n\n        }\n\n    }\n\n    render() {\n        if (this.state.card === null) {\n            return (<div>loading</div>)\n        } else {\n\n            let card_list_dom = []\n\n            for (let i = 0; i < this.state.cardList.length; i++) {\n                let card = this.state.cardList[i]\n\n                //设置笔记样式\n                // left = index*40px; right = index*-40-400\n                let note_style = {\n                    left: i * 40 + 'px'\n                }\n                let note = <Container style={note_style} key={card['card']['id']} handleHashChange={this.handleHashChange} handleLinkClick={this.handleLinkClick} card={card} />\n                card_list_dom.push(note)\n            }\n\n            return (<div>\n\n                <div>\n                    <Nav />\n                    {/* <Container card={card} /> */}\n                    <div className='notes'>\n                        {card_list_dom}\n                    </div>\n\n                    <Footer />\n                </div>\n\n            </div>)\n        }\n    }\n\n\n\n}\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}