{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/heptabase_blog/src/page/Post.js\";\nimport React from 'react';\nimport Nav from '../components/Nav';\nimport '../index.css';\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Post extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      content: '',\n      isLoading: true\n    };\n  }\n  componentWillMount() {\n    //console.log(this.props.location)//传递过来的所有参数\n    // console.log(this.props.location.state.key)//val值\n\n    let heptabase_blog_data;\n    getHeptabaseData.then(res => {\n      heptabase_blog_data = res.data;\n      console.log(res);\n      //获取 URL 中的文章 ID\n      let post_id = window.location.pathname.replace('/post/', '');\n      for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n        if (heptabase_blog_data.cards[i]['id'] == post_id) {\n          let card_text = getClearImag(heptabase_blog_data.cards[i]['content']);\n          card_text = getClearCard(card_text, heptabase_blog_data.cards);\n          this.setState({\n            content: card_text,\n            isLoading: false\n          });\n          break;\n        }\n      }\n    });\n  }\n  render() {\n    if (this.state.isLoading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Loaidng...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 20\n      }, this);\n    } else {\n      let card_text = this.state.content;\n      var showdown = require('showdown'),\n        converter = new showdown.Converter(),\n        text = card_text,\n        html = converter.makeHtml(text);\n      // console.log(html);\n\n      // 处理 html 中的卡片链接，首先确认是卡片，然后再获取卡片的标题和链接，获取不到则提示无效的卡片\n\n      // 滚动到顶部\n      window.scrollTo(0, 0);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsxDEV(\"article\", {\n            dangerouslySetInnerHTML: {\n              __html: html\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 17\n      }, this);\n    }\n  }\n}\nexport default Post;","map":{"version":3,"names":["React","Nav","getHeptabaseData","getClearCard","getClearImag","Post","Component","constructor","props","state","content","isLoading","componentWillMount","heptabase_blog_data","then","res","data","console","log","post_id","window","location","pathname","replace","i","cards","length","card_text","setState","render","showdown","require","converter","Converter","text","html","makeHtml","scrollTo","__html"],"sources":["/Users/jiangzilong/学习/minpg/heptabase_blog/src/page/Post.js"],"sourcesContent":["import React from 'react';\nimport Nav from '../components/Nav';\nimport '../index.css'\nimport { getHeptabaseData,getClearCard,getClearImag } from '../constantFunction'\n\nclass Post extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { content: '', isLoading: true };\n    }\n\n    componentWillMount() {\n        //console.log(this.props.location)//传递过来的所有参数\n        // console.log(this.props.location.state.key)//val值\n\n\n\n        let heptabase_blog_data\n        getHeptabaseData.then((res) => {\n            heptabase_blog_data = res.data\n            console.log(res);\n            //获取 URL 中的文章 ID\n            let post_id = window.location.pathname.replace('/post/', '')\n\n            for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n                if (heptabase_blog_data.cards[i]['id'] == post_id) {\n\n                    let card_text = getClearImag(heptabase_blog_data.cards[i]['content'])\n                    card_text = getClearCard(card_text, heptabase_blog_data.cards)\n\n                    this.setState({ content: card_text,isLoading:false })\n                    break;\n                }\n            }\n        })\n\n\n\n    }\n\n    render() {\n\n\n        if (this.state.isLoading) {\n            return <div>Loaidng...</div>\n        } else {\n            let card_text = this.state.content\n\n\n\n\n            var showdown = require('showdown'),\n                converter = new showdown.Converter(),\n                text = card_text,\n                html = converter.makeHtml(text);\n            // console.log(html);\n\n            // 处理 html 中的卡片链接，首先确认是卡片，然后再获取卡片的标题和链接，获取不到则提示无效的卡片\n\n            // 滚动到顶部\n            window.scrollTo(0, 0);\n\n            return (\n                <div>\n                    <Nav />\n                    <div className='container'>\n\n                        <article dangerouslySetInnerHTML={{ __html: html }}></article>\n\n                    </div>\n                </div>\n            );\n        }\n    }\n\n}\n\nexport default Post;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAO,cAAc;AACrB,SAASC,gBAAgB,EAACC,YAAY,EAACC,YAAY,QAAQ,qBAAqB;AAAA;AAEhF,MAAMC,IAAI,SAASL,KAAK,CAACM,SAAS,CAAC;EAE/BC,WAAW,CAACC,KAAK,EAAE;IACf,KAAK,CAACA,KAAK,CAAC;IACZ,IAAI,CAACC,KAAK,GAAG;MAAEC,OAAO,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAK,CAAC;EACjD;EAEAC,kBAAkB,GAAG;IACjB;IACA;;IAIA,IAAIC,mBAAmB;IACvBX,gBAAgB,CAACY,IAAI,CAAEC,GAAG,IAAK;MAC3BF,mBAAmB,GAAGE,GAAG,CAACC,IAAI;MAC9BC,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC;MAChB;MACA,IAAII,OAAO,GAAGC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAACC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC;MAE5D,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,mBAAmB,CAACY,KAAK,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;QACvD,IAAIX,mBAAmB,CAACY,KAAK,CAACD,CAAC,CAAC,CAAC,IAAI,CAAC,IAAIL,OAAO,EAAE;UAE/C,IAAIQ,SAAS,GAAGvB,YAAY,CAACS,mBAAmB,CAACY,KAAK,CAACD,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;UACrEG,SAAS,GAAGxB,YAAY,CAACwB,SAAS,EAAEd,mBAAmB,CAACY,KAAK,CAAC;UAE9D,IAAI,CAACG,QAAQ,CAAC;YAAElB,OAAO,EAAEiB,SAAS;YAAChB,SAAS,EAAC;UAAM,CAAC,CAAC;UACrD;QACJ;MACJ;IACJ,CAAC,CAAC;EAIN;EAEAkB,MAAM,GAAG;IAGL,IAAI,IAAI,CAACpB,KAAK,CAACE,SAAS,EAAE;MACtB,oBAAO;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAqB;IAChC,CAAC,MAAM;MACH,IAAIgB,SAAS,GAAG,IAAI,CAAClB,KAAK,CAACC,OAAO;MAKlC,IAAIoB,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;QAC9BC,SAAS,GAAG,IAAIF,QAAQ,CAACG,SAAS,EAAE;QACpCC,IAAI,GAAGP,SAAS;QAChBQ,IAAI,GAAGH,SAAS,CAACI,QAAQ,CAACF,IAAI,CAAC;MACnC;;MAEA;;MAEA;MACAd,MAAM,CAACiB,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAErB,oBACI;QAAA,wBACI,QAAC,GAAG;UAAA;UAAA;UAAA;QAAA,QAAG,eACP;UAAK,SAAS,EAAC,WAAW;UAAA,uBAEtB;YAAS,uBAAuB,EAAE;cAAEC,MAAM,EAAEH;YAAK;UAAE;YAAA;YAAA;YAAA;UAAA;QAAW;UAAA;UAAA;UAAA;QAAA,QAE5D;MAAA;QAAA;QAAA;QAAA;MAAA,QACJ;IAEd;EACJ;AAEJ;AAEA,eAAe9B,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}