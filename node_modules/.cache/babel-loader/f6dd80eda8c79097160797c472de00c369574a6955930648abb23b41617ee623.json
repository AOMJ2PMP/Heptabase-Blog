{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/Heptabase-Blog/src/page/Post.js\",\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\nimport Container from '../components/Container';\nimport Nav from '../components/Nav';\nimport '../index.css';\nimport 'github-markdown-css';\n\n// 文章页面\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Post(props) {\n  _s3();\n  var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  let {\n    slug\n  } = useParams();\n  const useScrollToTop = () => {\n    _s();\n    //注意自定义Hooks要用useXXX定义\n    const {\n      pathname\n    } = useLocation();\n    useEffect(() => {\n      console.log('useScrollToTop');\n      console.log(sessionStorage.getItem(pathname));\n      window.scrollTo(0, 0);\n      sessionStorage.setItem(pathname, 'pathname');\n      console.log(sessionStorage.getItem(pathname));\n    }, [pathname]);\n  };\n  _s(useScrollToTop, \"+8VPq4+XDMjo/kjL3WLkbwU2Amg=\", false, function () {\n    return [useLocation];\n  });\n  const useReStoreScrollTop = () => {\n    _s2();\n    const {\n      pathname\n    } = useLocation();\n    useEffect(() => {\n      try {\n        let scrollY = sessionStorage.getItem(pathname);\n        scrollY && window.scrollTo(0, scrollY);\n      } catch (error) {\n        throw error;\n      }\n      return () => {\n        try {\n          sessionStorage.setItem(pathname, window.scrollY); //这里使用scrollY是获取文档window在垂直页面\n        } catch (error) {\n          //的滚动值，如果是特定DOM元素用srcollTop\n          throw error;\n        }\n      };\n    }, [pathname]);\n  };\n  _s2(useReStoreScrollTop, \"+8VPq4+XDMjo/kjL3WLkbwU2Amg=\", false, function () {\n    return [useLocation];\n  });\n  useScrollToTop();\n  // useReStoreScrollTop();\n\n  useEffect(() => {\n    // console.log('scrollTo(0, 0)');\n    // window.scrollTo(0, 0);\n    console.log('Post useEffect');\n  });\n  document.title = props.title;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        post_id: slug\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 12\n  }, this);\n}\n_s3(Post, \"HBQhplv72bdxUEIBjnhAF29acK0=\", false, function () {\n  return [useParams, useScrollToTop];\n});\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Routes","Route","Link","useParams","useLocation","Container","Nav","Post","props","slug","useScrollToTop","pathname","console","log","sessionStorage","getItem","window","scrollTo","setItem","useReStoreScrollTop","scrollY","error","document","title"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/src/page/Post.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nimport Container from '../components/Container'\nimport Nav from '../components/Nav';\nimport '../index.css'\n\nimport 'github-markdown-css'\n\n// 文章页面\nfunction Post(props) {\n    let { slug } = useParams();\n\n\n    const useScrollToTop = () => {   //注意自定义Hooks要用useXXX定义\n        const { pathname } = useLocation();\n        useEffect(() => {\n            \n            console.log('useScrollToTop');\n\n            \n\n            console.log(sessionStorage.getItem(pathname));\n            window.scrollTo(0, 0);\n\n            sessionStorage.setItem(pathname, 'pathname')\n\n            console.log(sessionStorage.getItem(pathname));\n\n        }, [pathname]);\n    }\n\n\n    const useReStoreScrollTop = () => {\n        const { pathname } = useLocation();\n        useEffect(() => {\n            try {\n                let scrollY = sessionStorage.getItem(pathname)\n                scrollY && window.scrollTo(0, scrollY)\n            } catch (error) {\n                throw error\n            }\n            return () => {\n                try {\n                    sessionStorage.setItem(pathname, window.scrollY)    //这里使用scrollY是获取文档window在垂直页面\n                } catch (error) {                                     //的滚动值，如果是特定DOM元素用srcollTop\n                    throw error\n                }\n            };\n        }, [pathname])\n    }\n\n    useScrollToTop();\n    // useReStoreScrollTop();\n\n    useEffect(() => {\n        // console.log('scrollTo(0, 0)');\n        // window.scrollTo(0, 0);\n        console.log('Post useEffect');\n\n    })\n\n    document.title = props.title\n\n    return <div>\n\n        <div>\n            <Nav />\n            <Container post_id={slug} />\n        </div>\n    </div>;\n\n}\n\nexport default Post;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,SAAS,QAAQ,kBAAkB;AAC1F,SAASC,WAAW,QAAQ,cAAc;AAE1C,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAO,cAAc;AAErB,OAAO,qBAAqB;;AAE5B;AAAA;AACA,SAASC,IAAI,CAACC,KAAK,EAAE;EAAA;EAAA;IAAA;EACjB,IAAI;IAAEC;EAAK,CAAC,GAAGN,SAAS,EAAE;EAG1B,MAAMO,cAAc,GAAG,MAAM;IAAA;IAAI;IAC7B,MAAM;MAAEC;IAAS,CAAC,GAAGP,WAAW,EAAE;IAClCR,SAAS,CAAC,MAAM;MAEZgB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAI7BD,OAAO,CAACC,GAAG,CAACC,cAAc,CAACC,OAAO,CAACJ,QAAQ,CAAC,CAAC;MAC7CK,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAErBH,cAAc,CAACI,OAAO,CAACP,QAAQ,EAAE,UAAU,CAAC;MAE5CC,OAAO,CAACC,GAAG,CAACC,cAAc,CAACC,OAAO,CAACJ,QAAQ,CAAC,CAAC;IAEjD,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAClB,CAAC;EAAA,GAhBKD,cAAc;IAAA,QACKN,WAAW;EAAA;EAkBpC,MAAMe,mBAAmB,GAAG,MAAM;IAAA;IAC9B,MAAM;MAAER;IAAS,CAAC,GAAGP,WAAW,EAAE;IAClCR,SAAS,CAAC,MAAM;MACZ,IAAI;QACA,IAAIwB,OAAO,GAAGN,cAAc,CAACC,OAAO,CAACJ,QAAQ,CAAC;QAC9CS,OAAO,IAAIJ,MAAM,CAACC,QAAQ,CAAC,CAAC,EAAEG,OAAO,CAAC;MAC1C,CAAC,CAAC,OAAOC,KAAK,EAAE;QACZ,MAAMA,KAAK;MACf;MACA,OAAO,MAAM;QACT,IAAI;UACAP,cAAc,CAACI,OAAO,CAACP,QAAQ,EAAEK,MAAM,CAACI,OAAO,CAAC,EAAI;QACxD,CAAC,CAAC,OAAOC,KAAK,EAAE;UAAsC;UAClD,MAAMA,KAAK;QACf;MACJ,CAAC;IACL,CAAC,EAAE,CAACV,QAAQ,CAAC,CAAC;EAClB,CAAC;EAAA,IAjBKQ,mBAAmB;IAAA,QACAf,WAAW;EAAA;EAkBpCM,cAAc,EAAE;EAChB;;EAEAd,SAAS,CAAC,MAAM;IACZ;IACA;IACAgB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EAEjC,CAAC,CAAC;EAEFS,QAAQ,CAACC,KAAK,GAAGf,KAAK,CAACe,KAAK;EAE5B,oBAAO;IAAA,uBAEH;MAAA,wBACI,QAAC,GAAG;QAAA;QAAA;QAAA;MAAA,QAAG,eACP,QAAC,SAAS;QAAC,OAAO,EAAEd;MAAK;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA;EAC1B;IAAA;IAAA;IAAA;EAAA,QACJ;AAEV;AAAC,IA9DQF,IAAI;EAAA,QACMJ,SAAS,EAyCxBO,cAAc;AAAA;AAAA,KA1CTH,IAAI;AAgEb,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}