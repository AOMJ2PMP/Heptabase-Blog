{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/Heptabase-Blog/src/page/Post.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams, useNavigate } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\nimport Container from '../components/Container';\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer';\nimport Loading from '../components/Loading';\nimport '../index.css';\nimport 'github-markdown-css';\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction';\nimport { id } from 'date-fns/locale';\nimport useHash from \"../hooks/useHash\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet windowWidth = window.innerWidth;\nlet minWidth = 600;\n\n// 文章页面\nclass Post extends React.Component {\n  constructor(props) {\n    var _this;\n    super(props);\n    _this = this;\n    this.findContent = (id, heptabase_blog_data) => {\n      if (heptabase_blog_data === '') {\n        return;\n      }\n      let new_card = null;\n      console.log('Post findContent for:');\n      for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n        if (heptabase_blog_data.cards[i]['id'] == id) {\n          // 处理内容中的图片\n          heptabase_blog_data.cards[i] = getClearImag(heptabase_blog_data.cards[i]);\n          console.log('getClearImag done');\n          // 处理内容中的链接\n          new_card = getClearCard(heptabase_blog_data.cards[i], heptabase_blog_data.cards);\n          heptabase_blog_data.cards[i] = new_card['card'];\n          return new_card;\n        }\n      }\n      return new_card;\n    };\n    this.handleLinkClick = function (link_id) {\n      let current_id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n      // 设置当前活跃的笔记（用户焦点）\n      if (_this.state.activeNote !== link_id) {\n        // 设置 state\n        _this.setState({\n          activeNote: link_id\n        }, () => {\n          _this.setUrlActiveNote(link_id);\n        });\n      }\n\n      // 已经显示此卡片则不更新 URL 和数据\n      let bingo = false;\n      _this.state.cardList.forEach(item => {\n        if (link_id === item['card']['id']) {\n          bingo = true;\n        }\n      });\n      if (bingo || current_id === undefined || current_id === null) {\n        return;\n      }\n\n      // 删除 Link 所在 card 后的所有 URL 参数\n      // let url_search = window.location.search\n      // url_search = url_search.replace('?', '')\n      // url_search = url_search.replace(/&/gi, '')\n      // let url_search_list = url_search.split('note-id=')\n\n      let getUrlSearch_req = _this.getUrlSearch(window.location.search);\n      let url_search_list = getUrlSearch_req['url_search_list'];\n      let new_url_search = '';\n      let current_page_index = -1;\n      for (let i = 0; i < url_search_list.length; i++) {\n        if (url_search_list[i] === '') {\n          continue;\n        }\n        if (url_search_list[i] === current_id) {\n          // URL 参数 === current_id\n          current_page_index = i;\n        } else {\n          // URL 参数 !== current_id\n        }\n        if (new_url_search == '') {\n          new_url_search += '?note-id=' + url_search_list[i];\n        } else {\n          new_url_search += '&note-id=' + url_search_list[i];\n        }\n\n        //如果当前 id === current_id，则忽略后面的所有 ID\n        if (current_page_index > -1) {\n          break;\n        }\n      }\n      if (new_url_search == '') {\n        new_url_search += '?note-id=' + link_id;\n      } else {\n        new_url_search += '&note-id=' + link_id;\n      }\n      new_url_search += '&active-note-id=' + link_id;\n\n      // 设置 URL\n      window.history.pushState({}, '', window.location.origin + '/post' + new_url_search);\n      // 记录 URL\n      _this.setState({\n        location: window.location.href\n      });\n\n      // 删除 URL 中不存在的 Card\n      _this.resetCardList();\n      // 根据 URL 获取 card 数据\n      _this.herfToData();\n    };\n    this.herfToData = () => {\n      // 首页的情况\n      if (window.location.search === '') {\n        // 找到首页卡片的 ID\n        let main_id = this.state.main_card['id'];\n        // 设置 URL\n        window.location.replace(window.location.origin + '/post?note-id=' + main_id);\n      }\n\n      // 从 URL 中获取 note id，根据 id 获取卡片数据\n      let card_list = [];\n      let getUrlSearch_req = this.getUrlSearch(window.location.search);\n      let url_search_list = getUrlSearch_req['url_search_list'];\n      for (let i = 0; i < url_search_list.length; i++) {\n        if (url_search_list[i] == '') {\n          continue;\n        }\n        // 将数据保存到 card list 中\n        card_list.push(this.findContent(url_search_list[i], this.state.card));\n      }\n\n      // 设置当前活跃的笔记（用户焦点）\n      let activeNote;\n      if (getUrlSearch_req['active_str'] !== '') {\n        activeNote = getUrlSearch_req['active_str'].replace('active-note-id=', '');\n      } else {\n        activeNote = card_list[card_list.length - 1]['card']['id'];\n      }\n\n      // 收集 card 数据后一次性 setState（在 for 内分多次 setState 的话容易丢失数据）\n      if (this.state.activeNote !== activeNote) {\n        this.setState({\n          cardList: card_list,\n          activeNote: activeNote\n        }, () => {\n          // 更新 URL\n          this.setUrlActiveNote(activeNote);\n        });\n      }\n    };\n    this.handleHashChange = url => {\n      setTimeout(() => {\n        let note_list = document.getElementsByClassName('container');\n        let foucus_note = this.state.activeNote;\n        let target_note_offsetLeft = 0;\n        for (let j = 0; j < note_list.length; j++) {\n          let note = note_list[j];\n\n          // 定位到当前用户关注的笔记\n          if (note.getAttribute('note_id') === foucus_note) {\n            if (windowWidth > minWidth) {\n              console.log(target_note_offsetLeft);\n              document.getElementsByClassName('notes')[0].scrollTo({\n                left: j * 650,\n                behavior: 'smooth'\n              });\n            } else {}\n            break;\n          }\n          target_note_offsetLeft += note.clientWidth;\n        }\n\n        // 设置样式、小标题\n        this.setCardMiniTitleAndStyle();\n      }, 100);\n\n      // 如果 url 发生变化，则更新数据\n      let old_url = this.getUrlSearch(this.state.location);\n      let new_url = this.getUrlSearch(url);\n      let old_url_1 = old_url['url_search_list'].join('-');\n      let new_url_1 = new_url['url_search_list'].join('-');\n\n      // 数据发生变化（忽略焦点变化）\n      if (new_url_1 !== old_url_1) {\n        // 将当前 URL 保存到 state 中\n        this.setState({\n          location: url\n        }, () => {\n          if (this.state.location !== '') {\n            // cardList 中不存在 URL 的某一个 card\n            // 加载此 card 的数据\n            this.herfToData();\n          }\n        });\n      }\n\n      // 焦点发生变化\n      if (old_url['active_str'] !== new_url['active_str']) {\n        // 将当前 URL 保存到 state 中\n        this.setState({\n          location: url\n        }, () => {\n          if (this.state.location !== '') {\n            // 记录新焦点到 state 中\n            let new_active_note_id = new_url['active_str'].replace('active-note-id=', '');\n            this.setState({\n              activeNote: new_active_note_id\n            });\n          }\n        });\n      }\n\n      // 删除 URL 中不存在的 Card\n      this.resetCardList();\n    };\n    this.resetCardList = () => {\n      let url = window.location.href;\n      //比对 url 和 cardList\n      for (let i = 0; i < this.state.cardList.length; i++) {\n        // url 中不存在此 card\n        if (url.indexOf(this.state.cardList[i]['card']['id']) < 0) {\n          // 删除 card\n          this.state.cardList.splice(i, 1);\n          this.setState({\n            cardList: this.state.cardList\n          });\n        } else {\n          // url 中存在此 card\n          // continue\n        }\n      }\n    };\n    this.setCardMiniTitleAndStyle = () => {\n      let notes = document.getElementsByClassName('container');\n\n      // console.log('setCardMiniTitleAndStyle');\n\n      for (let j = 0; j < notes.length; j++) {\n        // 小标题\n\n        let type = 0; // 记录标题在左侧还是右侧\n        let note; // 记录需要添加标题的节点\n\n        // 判断卡片的位置，当遮挡前 1 个卡片时，前 1 个卡片显示垂直标题\n        let left_mark = notes[j].getBoundingClientRect().x <= j * 40;\n        // 判断是否要显示右侧标题\n        let right_mark = notes[j].getBoundingClientRect().x + 1 >= window.innerWidth - (notes.length - j) * 40;\n\n        // 左侧小标题\n        if (right_mark !== true) {\n          if (left_mark) {\n            if (j !== 0) {\n              type = 1;\n              note = notes[j - 1];\n            }\n          } else {\n            // 移除小标题\n            if (j !== 0) {\n              note = notes[j - 1];\n            }\n            if (note !== undefined) {\n              let note_title = note.getElementsByClassName('note_title')[0];\n              if (note_title !== undefined) {\n                // 移除标题父级容器的类名标记\n                note.classList.remove('mini');\n\n                // 移除前一个元素的垂直标题\n                note.removeChild(note_title);\n              }\n            }\n          }\n        }\n\n        // 右侧小标题\n        if (left_mark !== true) {\n          if (right_mark) {\n            type = 2;\n            note = notes[j];\n            // 添加悬浮样式\n            // note.classList.add('overlay')\n          } else {\n            // 移除小标题\n            note = notes[j];\n            if (note !== undefined && j !== 0) {\n              let note_title = note.getElementsByClassName('note_title')[0];\n              if (note_title !== undefined) {\n                // 移除标题父级容器的类名标记\n                note.classList.remove('mini');\n\n                // 移除前一个元素的垂直标题\n                note.removeChild(note_title);\n              }\n            }\n\n            // 移除悬浮样式\n            // note.classList.remove('overlay')\n          }\n        }\n\n        // 需要显示小标题\n        if (type > 0) {\n          // 如果元素无标题\n          if (note.classList.contains('mini') == false) {\n            // 前一个元素显示垂直标题\n            let note_title = document.createElement('div');\n            note_title.classList.add('note_title');\n            if (type === 1) {\n              note_title.style.left = (j - 1) * 40 + 'px';\n            } else {\n              note_title.style.right = (notes.length - j) * 40 - 40 + 'px';\n            }\n\n            // 小标题文案\n            let note_title_span = document.createElement('p');\n            if (note.getElementsByTagName('H1').length === 0) {\n              // 如果笔记中没有 H1 标题\n              note_title_span.innerHTML = note.innerText.substring(0, 6) + '...';\n            } else {\n              note_title_span.innerHTML = note.getElementsByTagName('H1')[0].innerHTML;\n            }\n            note_title_span.onclick = event => {\n              console.log(event);\n              console.log(event.target.innerText);\n              console.log(note.getAttribute('note_id'));\n              this.handleLinkClick(note.getAttribute('note_id'));\n            };\n\n            // 小标题关闭按钮\n            let note_close_button = document.createElement('span');\n            note_close_button.innerHTML = '<svg t=\"1670226356192\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2683\" width=\"16\" height=\"16\"><path d=\"M557.2 512l233.4-233.4c12.5-12.5 12.5-32.8 0-45.2s-32.8-12.5-45.2 0L512 466.8 278.6 233.4c-12.5-12.5-32.8-12.5-45.2 0s-12.5 32.8 0 45.2L466.8 512 233.4 745.4c-12.5 12.5-12.5 32.8 0 45.2 6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4L512 557.2l233.4 233.4c6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4c12.5-12.5 12.5-32.8 0-45.2L557.2 512z\" p-id=\"2684\"></path></svg>';\n            note_close_button.classList.add('note_close_button');\n            note_close_button.onclick = event => {\n              // 点击关闭按钮\n\n              this.handleCardCloseClick(note.getAttribute('note_id'));\n            };\n            note_title.appendChild(note_title_span);\n            note_title.appendChild(note_close_button);\n            note.appendChild(note_title);\n            note.classList.add('mini');\n          }\n        }\n\n        // 样式\n        if (j !== 0) {\n          if (notes[j].getBoundingClientRect().x < notes[j - 1].getBoundingClientRect().x + notes[j - 1].getBoundingClientRect().width) {\n            notes[j].classList.add('overlay');\n          } else {\n            notes[j].classList.remove('overlay');\n          }\n        }\n      }\n    };\n    this.handleCardCloseClick = note_id => {\n      console.log('handleCardCloseClick');\n      // 修改 URL\n      let new_url = window.location.href.replace('note-id=' + note_id, '');\n      // 设置 URL\n      window.history.pushState({}, '', new_url);\n\n      // 记录 URL\n      this.setState({\n        location: window.location.href\n      });\n\n      // 从 UI 中隐藏卡片？？\n    };\n    this.getUrlSearch = location_search => {\n      let url_search = location_search.replace('?', '');\n      url_search = url_search.replace(/&/gi, '');\n\n      // 忽略焦点卡片\n      let active_str = ''; // 焦点卡片参数名称及其值\n      let active_index = url_search.indexOf('active-note-id');\n      if (active_index > -1) {\n        let is_last_index = url_search.indexOf('note-id', active_index + 14);\n        if (is_last_index > -1) {\n          // 焦点卡片不是最后一个参数\n          active_str = url_search.substring(active_index, is_last_index);\n        } else {\n          // 焦点卡片是最后一个参数\n          active_str = url_search.substring(active_index, url_search.length);\n        }\n      }\n      url_search = url_search.replace(active_str, '');\n      let url_search_list = url_search.split('note-id=');\n      return {\n        'url_search_list': url_search_list,\n        'active_str': active_str\n      };\n    };\n    this.setUrlActiveNote = note_id => {\n      // 获取 URL 中的焦点卡片信息\n      let getUrlSearch_req = this.getUrlSearch(window.location.search);\n      let active_str = getUrlSearch_req['active_str'];\n      let new_url_search = window.location.search;\n      if (active_str === '') {\n        // URL 中无焦点卡片\n\n        new_url_search = new_url_search + '&active-note-id=' + note_id;\n      } else {\n        // URL 中有焦点卡片\n\n        // 如果焦点卡片无变化，则不更新\n        if (active_str.indexOf(note_id) > -1) {\n          return;\n        }\n        new_url_search = new_url_search.replace(active_str, 'active-note-id=' + note_id);\n      }\n\n      // 删除旧卡片、写入新卡片\n\n      // 设置 URL\n      window.history.pushState({}, '', window.location.origin + '/post' + new_url_search);\n\n      // 记录 URL\n      this.setState({\n        location: window.location.href\n      });\n    };\n    this.state = {\n      card: null //所有的 hepta 数据\n      ,\n      main_card: null //首页卡片\n      ,\n      cardList: [] // 当前页面的卡片列表\n      ,\n      location: '' // 记录 URL\n      ,\n      activeNote: 'null' // 记录当前焦点卡片 etc 3a433c0b-e2e1-4722......\n    };\n  }\n\n  componentDidMount() {\n    // 请求 hepta 数据 getHeptabaseData\n    getHeptabaseData.then(res => {\n      let heptabase_blog_data = res.data;\n\n      // 将数据保存到 state 中\n      this.setState({\n        card: heptabase_blog_data,\n        main_card: res['pages']['about']\n      }, () => {\n        // 渲染 URL、数据\n        this.herfToData();\n      });\n    });\n\n    // 监听 notes 容器滚动\n    if (document.getElementsByClassName('notes')[0] !== undefined) {\n      document.getElementsByClassName('notes')[0].addEventListener('scroll', this.setCardMiniTitleAndStyle);\n    }\n  }\n\n  // 根据 card id 获取 card content\n\n  render() {\n    if (this.state.card === null || this.state.cardList.length === 0) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notes\",\n          children: /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 595,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 594,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 21\n      }, this);\n    } else {\n      // console.log(this.state.activeNote);\n\n      let card_list_dom = [];\n\n      //如果屏幕宽度较小，则只显示 1 条笔记\n      if (windowWidth < minWidth) {\n        // 获取用户关注的笔记进行展示\n\n        let card = this.state.cardList[this.state.cardList.length - 1];\n        for (let k = 0; k < this.state.cardList.length; k++) {\n          if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n            card = this.state.cardList[k];\n            break;\n          }\n        }\n\n        //设置笔记样式\n        // left = index*40px; right = index*-40-400\n        let note_style = {\n          left: 0\n        };\n        card_list_dom.push( /*#__PURE__*/_jsxDEV(Container, {\n          style: note_style,\n          handleHashChange: this.handleHashChange,\n          handleLinkClick: this.handleLinkClick,\n          card: card\n        }, card['card']['id'], false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 36\n        }, this));\n      } else {\n        for (let i = 0; i < this.state.cardList.length; i++) {\n          let card = this.state.cardList[i];\n\n          //设置笔记样式\n          // left = index*40px; right = index*-40-400\n          let note_style = {\n            left: i * 40 + 'px',\n            right: -694.8 + (this.state.cardList.length - i) * 40 + 'px',\n            flex: '0 0 auto'\n          };\n          let note = /*#__PURE__*/_jsxDEV(Container, {\n            style: note_style,\n            handleHashChange: this.handleHashChange,\n            handleLinkClick: this.handleLinkClick,\n            card: card\n          }, card['card']['id'], false, {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 32\n          }, this);\n          card_list_dom.push(note);\n        }\n      }\n\n      // 设置网页标题\n      for (let k = 0; k < this.state.cardList.length; k++) {\n        if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n          if (this.state.cardList[k]['card']['title'] !== 'About') {\n            document.title = this.state.cardList[k]['card']['title'];\n          } else {\n            document.title = 'Jiang 的数字花园🌱';\n          }\n          break;\n        }\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"notes_box\",\n        children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 658,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"notes\",\n          children: card_list_dom\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 660,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 21\n      }, this);\n    }\n  }\n}\nexport default Post;","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Routes","Route","Link","useParams","useNavigate","useLocation","Container","Nav","Footer","Loading","getHeptabaseData","getClearCard","getClearImag","id","useHash","windowWidth","window","innerWidth","minWidth","Post","Component","constructor","props","findContent","heptabase_blog_data","new_card","console","log","i","cards","length","handleLinkClick","link_id","current_id","undefined","state","activeNote","setState","setUrlActiveNote","bingo","cardList","forEach","item","getUrlSearch_req","getUrlSearch","location","search","url_search_list","new_url_search","current_page_index","history","pushState","origin","href","resetCardList","herfToData","main_id","main_card","replace","card_list","push","card","handleHashChange","url","setTimeout","note_list","document","getElementsByClassName","foucus_note","target_note_offsetLeft","j","note","getAttribute","scrollTo","left","behavior","clientWidth","setCardMiniTitleAndStyle","old_url","new_url","old_url_1","join","new_url_1","new_active_note_id","indexOf","splice","notes","type","left_mark","getBoundingClientRect","x","right_mark","note_title","classList","remove","removeChild","contains","createElement","add","style","right","note_title_span","getElementsByTagName","innerHTML","innerText","substring","onclick","event","target","note_close_button","handleCardCloseClick","appendChild","width","note_id","location_search","url_search","active_str","active_index","is_last_index","split","componentDidMount","then","res","data","addEventListener","render","card_list_dom","k","note_style","flex","title"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/src/page/Post.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams, useNavigate } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nimport Container from '../components/Container'\nimport Nav from '../components/Nav';\nimport Footer from '../components/Footer'\nimport Loading from '../components/Loading'\n\nimport '../index.css'\nimport 'github-markdown-css'\n\nimport { getHeptabaseData, getClearCard, getClearImag } from '../constantFunction'\nimport { id } from 'date-fns/locale';\n\nimport useHash from \"../hooks/useHash\";\n\n\n\nlet windowWidth = window.innerWidth\nlet minWidth = 600\n\n// 文章页面\nclass Post extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            card: null //所有的 hepta 数据\n            , main_card: null //首页卡片\n            , cardList: [] // 当前页面的卡片列表\n            , location: '' // 记录 URL\n            , activeNote: 'null' // 记录当前焦点卡片 etc 3a433c0b-e2e1-4722......\n        };\n    }\n\n    componentDidMount() {\n\n        // 请求 hepta 数据 getHeptabaseData\n        getHeptabaseData.then((res) => {\n\n            let heptabase_blog_data = res.data\n\n            // 将数据保存到 state 中\n            this.setState({\n                card: heptabase_blog_data,\n                main_card: res['pages']['about']\n            }, () => {\n\n                // 渲染 URL、数据\n                this.herfToData()\n            })\n\n        })\n\n        // 监听 notes 容器滚动\n        if (document.getElementsByClassName('notes')[0] !== undefined) {\n\n            document.getElementsByClassName('notes')[0].addEventListener('scroll', this.setCardMiniTitleAndStyle)\n        }\n\n    }\n\n    // 根据 card id 获取 card content\n    findContent = (id, heptabase_blog_data) => {\n        if (heptabase_blog_data === '') {\n            return\n        }\n\n        let new_card = null\n        console.log('Post findContent for:');\n        for (let i = 0; i < heptabase_blog_data.cards.length; i++) {\n\n            if (heptabase_blog_data.cards[i]['id'] == id) {\n\n                // 处理内容中的图片\n                heptabase_blog_data.cards[i] = getClearImag(heptabase_blog_data.cards[i])\n                console.log('getClearImag done');\n                // 处理内容中的链接\n                new_card = getClearCard(heptabase_blog_data.cards[i], heptabase_blog_data.cards)\n                heptabase_blog_data.cards[i] = new_card['card']\n\n                return new_card\n\n            }\n        }\n\n        return new_card\n\n    }\n\n    // 文章内链接、反向链接点击\n    handleLinkClick = (link_id, current_id = undefined) => {\n\n        // 设置当前活跃的笔记（用户焦点）\n        if (this.state.activeNote !== link_id) {\n\n            // 设置 state\n            this.setState({\n                activeNote: link_id\n            }, () => {\n                this.setUrlActiveNote(link_id)\n            })\n\n        }\n\n\n        // 已经显示此卡片则不更新 URL 和数据\n        let bingo = false\n        this.state.cardList.forEach(item => {\n\n            if (link_id === item['card']['id']) {\n\n                bingo = true\n\n            }\n\n        });\n\n        if (bingo || current_id === undefined || current_id === null) {\n\n            return\n        }\n\n        // 删除 Link 所在 card 后的所有 URL 参数\n        // let url_search = window.location.search\n        // url_search = url_search.replace('?', '')\n        // url_search = url_search.replace(/&/gi, '')\n        // let url_search_list = url_search.split('note-id=')\n\n        let getUrlSearch_req = this.getUrlSearch(window.location.search)\n        let url_search_list = getUrlSearch_req['url_search_list']\n\n        let new_url_search = ''\n        let current_page_index = -1\n        for (let i = 0; i < url_search_list.length; i++) {\n\n            if (url_search_list[i] === '') {\n                continue\n            }\n\n            if (url_search_list[i] === current_id) {\n                // URL 参数 === current_id\n                current_page_index = i\n            } else {\n                // URL 参数 !== current_id\n            }\n\n            if (new_url_search == '') {\n                new_url_search += '?note-id=' + url_search_list[i]\n            } else {\n                new_url_search += '&note-id=' + url_search_list[i]\n            }\n\n            //如果当前 id === current_id，则忽略后面的所有 ID\n            if (current_page_index > -1) {\n                break;\n            }\n        }\n\n        if (new_url_search == '') {\n            new_url_search += '?note-id=' + link_id\n        } else {\n            new_url_search += '&note-id=' + link_id\n        }\n\n\n        new_url_search += '&active-note-id=' + link_id\n\n        // 设置 URL\n        window.history.pushState({}, '', window.location.origin + '/post' + new_url_search)\n        // 记录 URL\n        this.setState({\n            location: window.location.href\n        })\n\n\n        // 删除 URL 中不存在的 Card\n        this.resetCardList()\n        // 根据 URL 获取 card 数据\n        this.herfToData()\n\n    }\n\n    herfToData = () => {\n\n        // 首页的情况\n        if (window.location.search === '') {\n\n            // 找到首页卡片的 ID\n            let main_id = this.state.main_card['id']\n            // 设置 URL\n            window.location.replace(window.location.origin + '/post?note-id=' + main_id)\n\n        }\n\n        // 从 URL 中获取 note id，根据 id 获取卡片数据\n        let card_list = []\n        let getUrlSearch_req = this.getUrlSearch(window.location.search)\n        let url_search_list = getUrlSearch_req['url_search_list']\n\n        for (let i = 0; i < url_search_list.length; i++) {\n            if (url_search_list[i] == '') {\n                continue\n            }\n            // 将数据保存到 card list 中\n            card_list.push(this.findContent(url_search_list[i], this.state.card))\n\n        }\n\n        // 设置当前活跃的笔记（用户焦点）\n        let activeNote\n        if (getUrlSearch_req['active_str'] !== '') {\n            activeNote = getUrlSearch_req['active_str'].replace('active-note-id=', '')\n        } else {\n            activeNote = card_list[card_list.length - 1]['card']['id']\n        }\n\n\n\n        // 收集 card 数据后一次性 setState（在 for 内分多次 setState 的话容易丢失数据）\n        if (this.state.activeNote !== activeNote) {\n            this.setState({\n                cardList: card_list,\n                activeNote: activeNote\n            }, () => {\n                // 更新 URL\n                this.setUrlActiveNote(activeNote)\n            })\n        }\n\n\n\n\n\n    }\n\n    // 当 URL 变化时（子组件 container 载入完毕后也会调用此方法）\n    handleHashChange = (url) => {\n\n        setTimeout(() => {\n            let note_list = document.getElementsByClassName('container')\n            let foucus_note = this.state.activeNote\n\n            let target_note_offsetLeft = 0\n            for (let j = 0; j < note_list.length; j++) {\n                let note = note_list[j]\n\n                // 定位到当前用户关注的笔记\n                if (note.getAttribute('note_id') === foucus_note) {\n\n                    if (windowWidth > minWidth) {\n                        console.log(target_note_offsetLeft);\n                        document.getElementsByClassName('notes')[0].scrollTo({ left: j * 650, behavior: 'smooth' })\n                    } else {\n\n                    }\n\n                    break;\n\n                }\n\n                target_note_offsetLeft += note.clientWidth\n            }\n\n            // 设置样式、小标题\n            this.setCardMiniTitleAndStyle()\n\n        }, 100);\n\n        // 如果 url 发生变化，则更新数据\n        let old_url = this.getUrlSearch(this.state.location)\n        let new_url = this.getUrlSearch(url)\n\n        let old_url_1 = old_url['url_search_list'].join('-')\n        let new_url_1 = new_url['url_search_list'].join('-')\n\n        // 数据发生变化（忽略焦点变化）\n        if (new_url_1 !== old_url_1) {\n\n            // 将当前 URL 保存到 state 中\n            this.setState({\n                location: url\n            }, () => {\n\n                if (this.state.location !== '') {\n\n                    // cardList 中不存在 URL 的某一个 card\n                    // 加载此 card 的数据\n                    this.herfToData()\n\n                }\n\n            })\n\n\n\n        }\n\n        // 焦点发生变化\n        if (old_url['active_str'] !== new_url['active_str']) {\n\n            // 将当前 URL 保存到 state 中\n            this.setState({\n                location: url\n            }, () => {\n\n                if (this.state.location !== '') {\n                    // 记录新焦点到 state 中\n                    let new_active_note_id = new_url['active_str'].replace('active-note-id=', '')\n                    this.setState({\n                        activeNote: new_active_note_id\n                    })\n                }\n\n            })\n\n\n\n        }\n\n        // 删除 URL 中不存在的 Card\n        this.resetCardList()\n\n    }\n\n    // 删除 URL 中不存在的 Card\n    resetCardList = () => {\n        let url = window.location.href\n        //比对 url 和 cardList\n        for (let i = 0; i < this.state.cardList.length; i++) {\n            // url 中不存在此 card\n            if (url.indexOf(this.state.cardList[i]['card']['id']) < 0) {\n\n                // 删除 card\n                this.state.cardList.splice(i, 1)\n                this.setState({\n                    cardList: this.state.cardList\n                })\n\n            } else {\n                // url 中存在此 card\n                // continue\n            }\n\n        }\n\n    }\n\n    // 设置小标题\n    setCardMiniTitleAndStyle = () => {\n\n        let notes = document.getElementsByClassName('container')\n\n        // console.log('setCardMiniTitleAndStyle');\n\n        for (let j = 0; j < notes.length; j++) {\n\n            // 小标题\n\n            let type = 0 // 记录标题在左侧还是右侧\n            let note // 记录需要添加标题的节点\n\n            // 判断卡片的位置，当遮挡前 1 个卡片时，前 1 个卡片显示垂直标题\n            let left_mark = notes[j].getBoundingClientRect().x <= j * 40\n            // 判断是否要显示右侧标题\n            let right_mark = notes[j].getBoundingClientRect().x + 1 >= window.innerWidth - (notes.length - j) * 40\n\n            // 左侧小标题\n            if (right_mark !== true) {\n\n                if (left_mark) {\n\n                    if (j !== 0) {\n                        type = 1\n                        note = notes[j - 1]\n                    }\n\n                } else {\n\n                    // 移除小标题\n                    if (j !== 0) {\n                        note = notes[j - 1]\n                    }\n\n                    if (note !== undefined) {\n                        let note_title = note.getElementsByClassName('note_title')[0]\n                        if (note_title !== undefined) {\n\n                            // 移除标题父级容器的类名标记\n                            note.classList.remove('mini')\n\n                            // 移除前一个元素的垂直标题\n                            note.removeChild(note_title)\n                        }\n                    }\n\n                }\n\n            }\n\n\n            // 右侧小标题\n            if (left_mark !== true) {\n\n                if (right_mark) {\n\n                    type = 2\n                    note = notes[j]\n                    // 添加悬浮样式\n                    // note.classList.add('overlay')\n\n                } else {\n                    // 移除小标题\n                    note = notes[j]\n\n                    if (note !== undefined && j !== 0) {\n                        let note_title = note.getElementsByClassName('note_title')[0]\n                        if (note_title !== undefined) {\n\n                            // 移除标题父级容器的类名标记\n                            note.classList.remove('mini')\n\n                            // 移除前一个元素的垂直标题\n                            note.removeChild(note_title)\n                        }\n                    }\n\n                    // 移除悬浮样式\n                    // note.classList.remove('overlay')\n                }\n\n            }\n\n\n            // 需要显示小标题\n            if (type > 0) {\n\n                // 如果元素无标题\n                if (note.classList.contains('mini') == false) {\n                    // 前一个元素显示垂直标题\n                    let note_title = document.createElement('div')\n                    note_title.classList.add('note_title')\n\n                    if (type === 1) {\n                        note_title.style.left = (j - 1) * 40 + 'px'\n                    } else {\n                        note_title.style.right = (notes.length - j) * 40 - 40 + 'px'\n                    }\n\n                    // 小标题文案\n                    let note_title_span = document.createElement('p')\n\n                    if (note.getElementsByTagName('H1').length === 0) {\n                        // 如果笔记中没有 H1 标题\n                        note_title_span.innerHTML = note.innerText.substring(0, 6) + '...'\n                    } else {\n                        note_title_span.innerHTML = note.getElementsByTagName('H1')[0].innerHTML\n                    }\n\n                    note_title_span.onclick = (event) => {\n                        console.log(event);\n                        console.log(event.target.innerText);\n                        console.log(note.getAttribute('note_id'));\n                        this.handleLinkClick(note.getAttribute('note_id'))\n                    }\n\n                    // 小标题关闭按钮\n                    let note_close_button = document.createElement('span')\n                    note_close_button.innerHTML = '<svg t=\"1670226356192\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"2683\" width=\"16\" height=\"16\"><path d=\"M557.2 512l233.4-233.4c12.5-12.5 12.5-32.8 0-45.2s-32.8-12.5-45.2 0L512 466.8 278.6 233.4c-12.5-12.5-32.8-12.5-45.2 0s-12.5 32.8 0 45.2L466.8 512 233.4 745.4c-12.5 12.5-12.5 32.8 0 45.2 6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4L512 557.2l233.4 233.4c6.2 6.2 14.4 9.4 22.6 9.4s16.4-3.1 22.6-9.4c12.5-12.5 12.5-32.8 0-45.2L557.2 512z\" p-id=\"2684\"></path></svg>'\n                    note_close_button.classList.add('note_close_button')\n                    note_close_button.onclick = (event) => {\n\n                        // 点击关闭按钮\n\n                        this.handleCardCloseClick(note.getAttribute('note_id'))\n                    }\n\n                    note_title.appendChild(note_title_span)\n                    note_title.appendChild(note_close_button)\n                    note.appendChild(note_title)\n\n                    note.classList.add('mini')\n                }\n\n            }\n\n            // 样式\n            if (j !== 0) {\n                if (notes[j].getBoundingClientRect().x < notes[j - 1].getBoundingClientRect().x + notes[j - 1].getBoundingClientRect().width) {\n                    notes[j].classList.add('overlay')\n                } else {\n                    notes[j].classList.remove('overlay')\n                }\n            }\n\n\n        }\n    }\n\n    // 关闭卡片\n    handleCardCloseClick = (note_id) => {\n\n        console.log('handleCardCloseClick');\n        // 修改 URL\n        let new_url = window.location.href.replace('note-id=' + note_id, '')\n        // 设置 URL\n        window.history.pushState({}, '', new_url)\n\n        // 记录 URL\n        this.setState({\n            location: window.location.href\n        })\n\n        // 从 UI 中隐藏卡片？？\n\n    }\n\n    // 获取 URL 参数\n    getUrlSearch = (location_search) => {\n\n        let url_search = location_search.replace('?', '')\n        url_search = url_search.replace(/&/gi, '')\n\n        // 忽略焦点卡片\n        let active_str = '' // 焦点卡片参数名称及其值\n        let active_index = url_search.indexOf('active-note-id')\n        if (active_index > -1) {\n            let is_last_index = url_search.indexOf('note-id', active_index + 14)\n            if (is_last_index > -1) {\n                // 焦点卡片不是最后一个参数\n                active_str = url_search.substring(active_index, is_last_index)\n            } else {\n                // 焦点卡片是最后一个参数\n                active_str = url_search.substring(active_index, url_search.length)\n            }\n\n        }\n\n        url_search = url_search.replace(active_str, '')\n\n        let url_search_list = url_search.split('note-id=')\n\n        return { 'url_search_list': url_search_list, 'active_str': active_str }\n\n    }\n\n    // 将焦点卡片 ID 写入 URL\n    setUrlActiveNote = (note_id) => {\n\n        // 获取 URL 中的焦点卡片信息\n        let getUrlSearch_req = this.getUrlSearch(window.location.search)\n        let active_str = getUrlSearch_req['active_str']\n\n        let new_url_search = window.location.search\n\n        if (active_str === '') {\n            // URL 中无焦点卡片\n\n            new_url_search = new_url_search + '&active-note-id=' + note_id\n\n        } else {\n            // URL 中有焦点卡片\n\n            // 如果焦点卡片无变化，则不更新\n            if (active_str.indexOf(note_id) > -1) {\n                return\n            }\n\n            new_url_search = new_url_search.replace(active_str, 'active-note-id=' + note_id)\n        }\n\n\n        // 删除旧卡片、写入新卡片\n\n\n        // 设置 URL\n        window.history.pushState({}, '', window.location.origin + '/post' + new_url_search)\n\n        // 记录 URL\n        this.setState({\n            location: window.location.href\n        })\n\n    }\n\n\n\n\n    render() {\n        if (this.state.card === null || this.state.cardList.length === 0) {\n            return (<div>\n                <Nav />\n                <div className='notes'>\n                    <Loading />\n                </div>\n                <Footer />\n            </div>)\n        } else {\n\n            // console.log(this.state.activeNote);\n\n            let card_list_dom = []\n\n            //如果屏幕宽度较小，则只显示 1 条笔记\n            if (windowWidth < minWidth) {\n\n                // 获取用户关注的笔记进行展示\n\n                let card = this.state.cardList[this.state.cardList.length - 1]\n\n                for (let k = 0; k < this.state.cardList.length; k++) {\n                    if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n                        card = this.state.cardList[k]\n                        break;\n                    }\n                }\n\n                //设置笔记样式\n                // left = index*40px; right = index*-40-400\n                let note_style = {\n                    left: 0\n                }\n                card_list_dom.push(<Container style={note_style} key={card['card']['id']} handleHashChange={this.handleHashChange} handleLinkClick={this.handleLinkClick} card={card} />)\n            } else {\n                for (let i = 0; i < this.state.cardList.length; i++) {\n                    let card = this.state.cardList[i]\n\n                    //设置笔记样式\n                    // left = index*40px; right = index*-40-400\n                    let note_style = {\n                        left: i * 40 + 'px',\n                        right: -694.8 + (this.state.cardList.length - i) * 40 + 'px',\n                        flex: '0 0 auto'\n                    }\n\n                    let note = <Container style={note_style} key={card['card']['id']} handleHashChange={this.handleHashChange} handleLinkClick={this.handleLinkClick} card={card} />\n                    card_list_dom.push(note)\n                }\n            }\n\n            // 设置网页标题\n            for (let k = 0; k < this.state.cardList.length; k++) {\n                if (this.state.cardList[k]['card']['id'] === this.state.activeNote) {\n\n                    if (this.state.cardList[k]['card']['title'] !== 'About') {\n                        document.title = this.state.cardList[k]['card']['title']\n                    } else {\n                        document.title = 'Jiang 的数字花园🌱'\n                    }\n\n                    break;\n                }\n            }\n\n            return (<div className='notes_box'>\n\n                <Nav />\n                {/* <Container card={card} /> */}\n                <div className='notes'>\n                    {card_list_dom}\n                </div>\n\n                {/* <Footer /> */}\n\n            </div>)\n        }\n    }\n\n\n\n}\n\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}