{"ast":null,"code":"var _jsxFileName = \"/Users/jiangzilong/\\u5B66\\u4E60/minpg/Heptabase-Blog/src/page/Post.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\nimport Container from '../components/Container';\nimport Nav from '../components/Nav';\nimport '../index.css';\nimport 'github-markdown-css';\n\n// 文章页面\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Post(props) {\n  _s2();\n  var _s = $RefreshSig$();\n  let {\n    slug\n  } = useParams();\n  let url_histroy = [];\n  const useScrollToTop = () => {\n    _s();\n    //注意自定义Hooks要用useXXX定义\n    const {\n      pathname\n    } = useLocation();\n    useEffect(() => {\n      console.log('useScrollToTop');\n      console.log(window.history);\n      console.log(window.history.pushState);\n      let thisPageKey = window.history.key;\n      if (url_histroy.indexOf(thisPageKey)) {\n        // 回到旧页面\n        window.scrollTo(0, 0);\n      } else {\n        url_histroy.push(window.history.key);\n      }\n\n      // console.log(pathname);\n\n      // console.log(sessionStorage.getItem('pathname'));\n\n      // sessionStorage.setItem('pathname', pathname)\n    }, [pathname]);\n  };\n  _s(useScrollToTop, \"+8VPq4+XDMjo/kjL3WLkbwU2Amg=\", false, function () {\n    return [useLocation];\n  });\n  useScrollToTop();\n  // useReStoreScrollTop();\n\n  useEffect(() => {\n    // console.log('scrollTo(0, 0)');\n    // window.scrollTo(0, 0);\n    console.log('Post useEffect');\n  });\n  document.title = props.title;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Nav, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        post_id: slug\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 12\n  }, this);\n}\n_s2(Post, \"HBQhplv72bdxUEIBjnhAF29acK0=\", false, function () {\n  return [useParams, useScrollToTop];\n});\n_c = Post;\nexport default Post;\nvar _c;\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["React","useState","useEffect","useRef","BrowserRouter","Router","Routes","Route","Link","useParams","useLocation","Container","Nav","Post","props","slug","url_histroy","useScrollToTop","pathname","console","log","window","history","pushState","thisPageKey","key","indexOf","scrollTo","push","document","title"],"sources":["/Users/jiangzilong/学习/minpg/Heptabase-Blog/src/page/Post.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Link, useParams } from 'react-router-dom';\nimport { useLocation } from \"react-router\";\n\nimport Container from '../components/Container'\nimport Nav from '../components/Nav';\nimport '../index.css'\n\nimport 'github-markdown-css'\n\n// 文章页面\nfunction Post(props) {\n    let { slug } = useParams();\n\n    let url_histroy = []\n\n    const useScrollToTop = () => {   //注意自定义Hooks要用useXXX定义\n        const { pathname } = useLocation();\n        useEffect(() => {\n\n            console.log('useScrollToTop');\n\n            console.log(window.history);\n            console.log(window.history.pushState);\n\n            let thisPageKey = window.history.key\n\n            if (url_histroy.indexOf(thisPageKey)) {\n                // 回到旧页面\n                window.scrollTo(0, 0);\n            } else {\n                url_histroy.push(window.history.key)\n            }\n\n            \n            \n            // console.log(pathname);\n\n            // console.log(sessionStorage.getItem('pathname'));\n\n\n\n            // sessionStorage.setItem('pathname', pathname)\n\n\n\n        }, [pathname]);\n    }\n\n    useScrollToTop();\n    // useReStoreScrollTop();\n\n    useEffect(() => {\n        // console.log('scrollTo(0, 0)');\n        // window.scrollTo(0, 0);\n        console.log('Post useEffect');\n\n    })\n\n    document.title = props.title\n\n    return <div>\n\n        <div>\n            <Nav />\n            <Container post_id={slug} />\n        </div>\n    </div>;\n\n}\n\nexport default Post;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,IAAI,EAAEC,SAAS,QAAQ,kBAAkB;AAC1F,SAASC,WAAW,QAAQ,cAAc;AAE1C,OAAOC,SAAS,MAAM,yBAAyB;AAC/C,OAAOC,GAAG,MAAM,mBAAmB;AACnC,OAAO,cAAc;AAErB,OAAO,qBAAqB;;AAE5B;AAAA;AACA,SAASC,IAAI,CAACC,KAAK,EAAE;EAAA;EAAA;EACjB,IAAI;IAAEC;EAAK,CAAC,GAAGN,SAAS,EAAE;EAE1B,IAAIO,WAAW,GAAG,EAAE;EAEpB,MAAMC,cAAc,GAAG,MAAM;IAAA;IAAI;IAC7B,MAAM;MAAEC;IAAS,CAAC,GAAGR,WAAW,EAAE;IAClCR,SAAS,CAAC,MAAM;MAEZiB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAE7BD,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,OAAO,CAAC;MAC3BH,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,OAAO,CAACC,SAAS,CAAC;MAErC,IAAIC,WAAW,GAAGH,MAAM,CAACC,OAAO,CAACG,GAAG;MAEpC,IAAIT,WAAW,CAACU,OAAO,CAACF,WAAW,CAAC,EAAE;QAClC;QACAH,MAAM,CAACM,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MACzB,CAAC,MAAM;QACHX,WAAW,CAACY,IAAI,CAACP,MAAM,CAACC,OAAO,CAACG,GAAG,CAAC;MACxC;;MAIA;;MAEA;;MAIA;IAIJ,CAAC,EAAE,CAACP,QAAQ,CAAC,CAAC;EAClB,CAAC;EAAA,GA/BKD,cAAc;IAAA,QACKP,WAAW;EAAA;EAgCpCO,cAAc,EAAE;EAChB;;EAEAf,SAAS,CAAC,MAAM;IACZ;IACA;IACAiB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;EAEjC,CAAC,CAAC;EAEFS,QAAQ,CAACC,KAAK,GAAGhB,KAAK,CAACgB,KAAK;EAE5B,oBAAO;IAAA,uBAEH;MAAA,wBACI,QAAC,GAAG;QAAA;QAAA;QAAA;MAAA,QAAG,eACP,QAAC,SAAS;QAAC,OAAO,EAAEf;MAAK;QAAA;QAAA;QAAA;MAAA,QAAG;IAAA;MAAA;MAAA;MAAA;IAAA;EAC1B;IAAA;IAAA;IAAA;EAAA,QACJ;AAEV;AAAC,IA1DQF,IAAI;EAAA,QACMJ,SAAS,EAqCxBQ,cAAc;AAAA;AAAA,KAtCTJ,IAAI;AA4Db,eAAeA,IAAI;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}